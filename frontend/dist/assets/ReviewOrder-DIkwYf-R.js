import{c as q,r,j as e,X as V,n as H,u as K}from"./index-CfNFHx42.js";import{B as p}from"./button-IV1FBFhl.js";import{I as w}from"./input-BFP6H-qf.js";import{B as W}from"./badge-C0NOVRvn.js";import{C as A}from"./card-D4zdQ-sX.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=q("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=q("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=q("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=q("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),J=({isOpen:s,onClose:l,item:a,onSave:t,suggestions:o=[],isLoading:c=!1})=>{const[m,f]=r.useState({material_name:"",sub_type:"",dimensions:"",quantity:1}),[k,v]=r.useState(!1),[h,C]=r.useState({});r.useEffect(()=>{s&&a&&(f({material_name:a.material_name||"",sub_type:a.sub_type||"",dimensions:a.dimensions||"",quantity:a.quantity||1}),C({}))},[s,a]),r.useEffect(()=>{if(s)return document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}},[s]);const g=(n,j)=>{f(I=>({...I,[n]:j})),h[n]&&C(I=>({...I,[n]:null})),n==="item"&&v(j.length>0)},N=n=>{const j=Math.max(1,m.quantity+n);g("quantity",j)},E=()=>{const n={};return m.material_name.trim()||(n.material_name="Material name is required"),(!m.quantity||m.quantity<1)&&(n.quantity="Quantity must be at least 1"),C(n),Object.keys(n).length===0},_=()=>{E()&&t(m)},b=n=>{g("material_name",n),v(!1)},S=o.filter(n=>n.toLowerCase().includes(m.material_name.toLowerCase())&&n.toLowerCase()!==m.material_name.toLowerCase()).slice(0,5);return s?e.jsx("div",{className:"fixed inset-0 z-50 bg-brand-charcoal bg-opacity-50 flex items-end sm:items-center justify-center p-0 sm:p-4",children:e.jsxs("div",{className:"bg-brand-white w-full h-full sm:h-auto sm:max-w-md sm:rounded-xl overflow-hidden shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-brand-charcoal/20 bg-brand-white sticky top-0 z-10",children:[e.jsx("h2",{className:"text-lg font-semibold text-brand-charcoal font-heading",children:a!=null&&a.id?"Edit Item":"Add Item"}),e.jsx(p,{variant:"ghost",size:"sm",onClick:l,className:"h-8 w-8 p-0 hover:bg-brand-charcoal/10","aria-label":"Close modal",children:e.jsx(V,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"p-4 space-y-4 max-h-[calc(100vh-140px)] overflow-y-auto",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-brand-charcoal font-body",children:"Item Name *"}),e.jsxs("div",{className:"relative",children:[e.jsx(w,{type:"text",value:m.material_name,onChange:n=>g("material_name",n.target.value),placeholder:"Enter material name",className:`h-12 ${h.material_name?"border-functional-danger":""}`,"aria-describedby":h.material_name?"material_name-error":void 0}),h.material_name&&e.jsx("p",{id:"material_name-error",className:"text-sm text-functional-danger mt-1 font-body",children:h.material_name}),k&&S.length>0&&e.jsx("div",{className:"absolute top-full left-0 right-0 bg-brand-white border border-brand-charcoal/20 rounded-lg shadow-lg mt-1 z-20 max-h-40 overflow-y-auto",children:S.map((n,j)=>e.jsx("button",{type:"button",className:"w-full px-3 py-3 text-left hover:bg-brand-charcoal/5 first:rounded-t-lg last:rounded-b-lg transition-colors text-sm font-body",onClick:()=>b(n),children:n},j))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-brand-charcoal font-body",children:"Subtype"}),e.jsx(w,{type:"text",value:m.sub_type,onChange:n=>g("subtype",n.target.value),placeholder:"Enter subtype",className:"h-12"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-brand-charcoal font-body",children:"Size/Unit"}),e.jsx(w,{type:"text",value:m.dimensions,onChange:n=>g("dimensions",n.target.value),placeholder:"Enter size or unit",className:"h-12"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-brand-charcoal font-body",children:"Quantity *"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(p,{type:"button",variant:"outline",size:"sm",onClick:()=>N(-1),disabled:m.quantity<=1,className:"h-12 w-12 rounded-lg","aria-label":"Decrease quantity",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),e.jsx(w,{type:"number",value:m.quantity,onChange:n=>g("quantity",parseInt(n.target.value)||1),className:`h-12 text-center flex-1 ${h.quantity?"border-functional-danger":""}`,min:"1","aria-describedby":h.quantity?"quantity-error":void 0}),e.jsx(p,{type:"button",variant:"outline",size:"sm",onClick:()=>N(1),className:"h-12 w-12 rounded-lg","aria-label":"Increase quantity",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]}),h.quantity&&e.jsx("p",{id:"quantity-error",className:"text-sm text-functional-danger font-body",children:h.quantity})]})]}),e.jsx("div",{className:"p-4 border-t border-brand-charcoal/20 bg-brand-charcoal/5 sticky bottom-0",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(p,{variant:"outline",onClick:l,className:"flex-1 h-12",disabled:c,children:"Cancel"}),e.jsx(p,{onClick:_,disabled:c,className:"flex-1 h-12 bg-brand-charcoal hover:bg-brand-charcoal/90 text-brand-white font-body",children:c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-brand-white border-t-transparent rounded-full animate-spin mr-2"}),"Saving..."]}):"Save Changes"})]})})]})}):null},X=s=>{const[l,a]=r.useState(!1);return r.useEffect(()=>{const t=window.matchMedia(s);t.matches!==l&&a(t.matches);const o=()=>a(t.matches);return window.addEventListener("resize",o),t.addEventListener("change",o),()=>{window.removeEventListener("resize",o),t.removeEventListener("change",o)}},[l,s]),l},Y=()=>X("(max-width: 767px)");var Z={};const ee=()=>({baseUrl:Z.REACT_APP_API_URL||"/api",strategy:"amplify-production"}),$=ee(),B=$.baseUrl;console.log(`ðŸš€ API Configuration: ${$.strategy}`);console.log(`ðŸ“¡ API Base URL: ${B}`);const se=async(s,l={})=>{const a=`${B}${s}`,t={headers:{"Content-Type":"application/json"}},o={...t,...l,headers:{...t.headers,...l.headers}};try{console.log(`ðŸ“¤ API Request: ${o.method||"GET"} ${a}`);const c=await fetch(a,o);if(!c.ok)throw new Error(`HTTP error! status: ${c.status}`);const m=await c.json();return console.log(`ðŸ“¥ API Response: ${a}`,m),m}catch(c){throw console.error(`âŒ API Error: ${a}`,c),c}},M=(s,l={})=>{const a=s.startsWith("/")?s:`/${s}`;return se(a,l)},D=r.memo(({value:s,onSave:l,inputType:a="text"})=>{const[t,o]=r.useState(!1),[c,m]=r.useState(s),f=r.useRef(null);r.useEffect(()=>{t&&f.current&&(f.current.focus(),f.current.select())},[t]);const k=()=>{c!==s&&l(c),o(!1)},v=()=>{m(s),o(!1)};return t?e.jsx(w,{ref:f,type:a,value:c,onChange:h=>m(h.target.value),onBlur:k,onKeyDown:h=>{h.key==="Enter"&&k(),h.key==="Escape"&&v()},className:"h-8 text-sm",min:a==="number"?1:void 0}):e.jsxs("div",{className:"flex items-center justify-between cursor-pointer group w-full h-full p-2 -m-2 rounded-md",onClick:()=>o(!0),children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:s||e.jsx("span",{className:"text-gray-400 italic",children:"Click to add..."})}),e.jsx(L,{className:"h-3 w-3 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity"})]})}),ae=r.memo(()=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-brand-charcoal to-brand-charcoal/90 rounded-xl flex items-center justify-center shadow-md",children:e.jsx("span",{className:"text-brand-white font-bold text-sm font-heading",children:"B"})}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-gradient-to-br from-brand-charcoal/80 to-brand-charcoal rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-brand-white text-xs font-bold font-heading",children:"ai"})})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg sm:text-xl font-bold text-brand-charcoal font-heading",children:"bab.ai"}),e.jsx("p",{className:"text-xs sm:text-sm text-brand-charcoal/70 font-body",children:"Order Review"})]})]})),te=r.memo(({row:s,onCellEdit:l,onDeleteRow:a})=>e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("td",{className:"bg-white px-4 py-2 border-b border-gray-200",children:e.jsx(D,{value:s.material_name,onSave:t=>l(s.id,"material_name",t)})}),e.jsx("td",{className:"bg-white px-4 py-2 border-b border-gray-200",children:e.jsx(D,{value:s.sub_type,onSave:t=>l(s.id,"sub_type",t)})}),e.jsx("td",{className:"bg-white px-4 py-2 border-b border-gray-200",children:e.jsx(D,{value:s.dimensions,onSave:t=>l(s.id,"dimensions",t)})}),e.jsx("td",{className:"bg-white px-4 py-2 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(p,{variant:"outline",size:"sm",onClick:()=>l(s.id,"quantity",Math.max(1,(s.quantity||1)-1)),disabled:s.quantity<=1,className:"h-8 w-8 p-0",children:e.jsx(G,{className:"h-3 w-3"})}),e.jsx(w,{type:"number",value:s.quantity||1,onChange:t=>l(s.id,"quantity",parseInt(t.target.value)||1),className:"h-8 w-16 text-center text-sm",min:"1"}),e.jsx(p,{variant:"outline",size:"sm",onClick:()=>l(s.id,"quantity",(s.quantity||1)+1),className:"h-8 w-8 p-0",children:e.jsx(R,{className:"h-3 w-3"})})]})}),e.jsx("td",{className:"px-4 py-2 border-b border-gray-200 text-center",children:e.jsx(p,{variant:"ghost",size:"sm",onClick:()=>a(s.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50 h-8 w-8 p-0",children:e.jsx(z,{className:"h-4 w-4"})})})]})),re=r.memo(({item:s,onEdit:l,onDelete:a})=>e.jsxs(A,{className:"p-4 mb-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:s.material_name||e.jsx("span",{className:"text-gray-400 italic",children:"Unnamed item"})}),s.sub_type&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:s.sub_type})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(p,{variant:"outline",size:"sm",onClick:()=>l(s),className:"h-9 w-9 p-0",children:e.jsx(L,{className:"h-4 w-4"})}),e.jsx(p,{variant:"outline",size:"sm",onClick:()=>a(s.id),className:"h-9 w-9 p-0 text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(z,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Size/Unit:"}),e.jsx("p",{className:"font-medium mt-1",children:s.dimensions||e.jsx("span",{className:"text-gray-400 italic",children:"Not specified"})})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-gray-500",children:"Quantity:"}),e.jsx("p",{className:"font-medium mt-1",children:s.quantity||1})]})]})]})),ne=()=>{const[s]=H(),l=K(),a=Y(),t=s.get("uuid"),[o,c]=r.useState([]),[m,f]=r.useState([]),[k,v]=r.useState(!0),[h,C]=r.useState(!1),[g,N]=r.useState(null),[E,_]=r.useState(!1),[b,S]=r.useState({name:s.get("name")||"Rajesh Kumar",phone:s.get("phone")||"+91 98765 43210",site:s.get("site")||"Residential Construction - Phase 2",address:s.get("address")||"123 Construction Site, Bangalore, Karnataka 560001",whatsappName:s.get("name")||"Rajesh Kumar",whatsappPhone:s.get("phone")||"+91 98765 43210"});r.useEffect(()=>{(async()=>{v(!0);try{const x=[M("projects")];t&&x.push(M(`review-order/${t}`));const[d,y]=await Promise.all(x);if(d!=null&&d.ok){const u=await d.json()||[];f(Array.isArray(u)?u:[])}if(t&&(y!=null&&y.ok)){const u=await y.json()||[],Q=Array.isArray(u)?u.map((P,F)=>({id:P.id||Date.now()+F,...P})):[{id:Date.now(),...u}];c(Q)}}catch(x){console.error("Error loading data:",x)}finally{v(!1)}})()},[t]);const n=r.useCallback((i,x,d)=>{c(y=>y.map(u=>u.id===i?{...u,[x]:d}:u))},[]),j=r.useCallback(i=>{c(x=>x.filter(d=>d.id!==i))},[]),I=r.useCallback(()=>{const x={id:Date.now(),material_name:"",sub_type:"",dimensions:"",quantity:1,unit_price:0};c(d=>[...d,x]),a&&(N(x),_(!0))},[a]),O=r.useCallback(i=>{N(i),_(!0)},[]),T=r.useCallback(async i=>{c(x=>x.map(d=>d.id===g.id?{...d,...i}:d)),_(!1),N(null)},[g]),U=r.useCallback(async()=>{var x;if(o.filter(d=>{var y;return!((y=d.material_name)!=null&&y.trim())||!d.quantity||d.quantity<=0}).length>0){alert("Please fill in all required fields (Item name and valid quantity)");return}if(!b.address.trim()){alert("Please enter a delivery address.");return}C(!0);try{const d=((x=crypto.randomUUID)==null?void 0:x.call(crypto))||Date.now().toString(),y={request_id:t,project_id:d,sender_id:b.whatsappPhone.replace(/\D/g,""),status:"DRAFT",delivery_location:b.address,notes:`Order placed via BAB.AI Dashboard for ${b.site}. Customer: ${b.whatsappName}`,expected_delivery_date:new Date(Date.now()+7*24*60*60*1e3).toISOString().split("T")[0],user_editable:!0,items:o.map(u=>({material_name:u.material_name,sub_type:u.sub_type||null,dimensions:u.dimensions||null,quantity:u.quantity||1,quantity_units:"units",unit_price:u.unit_price||null,status:"DRAFT"})),customerInfo:b,timestamp:new Date().toISOString()};localStorage.setItem("orderData",JSON.stringify(y)),l(`/select-vendors?uuid=${t}`,{state:{orderData:y}})}catch(d){console.error("Order submission failed:",d),alert(`Order submission failed: ${d.message}`)}finally{C(!1)}},[o,b,l,t]);return k?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-gray-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading your order..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 px-2 sm:px-4 lg:px-6 xl:px-8 py-6",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-40 shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ae,{}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 sm:w-10 sm:h-10 bg-gray-800 rounded-full",children:e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.484 3.488"})})}),e.jsxs("div",{className:"text-right hidden sm:block",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:b.name}),e.jsx("div",{className:"text-xs text-gray-500",children:b.phone})]})]})]})})}),e.jsxs("div",{className:"max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-4 sm:py-6",children:[e.jsx(A,{className:"p-4 sm:p-6 mb-4 sm:mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1 sm:mb-2",children:"Select Site/Project *"}),e.jsxs("select",{value:b.site,onChange:i=>S({...b,site:i.target.value}),className:"w-full px-3 py-2 text-sm sm:text-base border border-gray-300 rounded-md focus:ring-2 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"Choose your project..."}),m.map(i=>e.jsx("option",{value:i.name,children:i.name},i.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1 sm:mb-2",children:"Delivery Address *"}),e.jsx(w,{value:b.address,onChange:i=>S({...b,address:i.target.value}),placeholder:"Enter delivery address",className:"text-sm sm:text-base",required:!0})]})]})}),e.jsxs(A,{className:"p-4 sm:p-6 mb-4 sm:mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h2",{className:"text-base sm:text-lg font-semibold",children:"Order Items"}),e.jsxs(W,{className:"bg-gray-100 text-gray-700 px-2 sm:px-3 py-1 text-xs sm:text-sm",children:[o.length," items"]})]}),e.jsxs(p,{onClick:I,className:"bg-brand-charcoal hover:bg-brand-charcoal/90 text-brand-white h-9 sm:h-10 px-3 sm:px-4 font-body text-sm sm:text-base",children:[e.jsx(R,{className:"w-4 h-4 mr-1 sm:mr-2"}),"Add Item"]})]}),!a&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse bg-white",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b-2 border-gray-200",children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Material Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Sub Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Dimensions"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Quantity"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Action"})]})}),e.jsx("tbody",{children:o.map(i=>e.jsx(te,{row:i,onCellEdit:n,onDeleteRow:j},i.id))})]})}),a&&e.jsx("div",{className:"space-y-3",children:o.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("p",{children:"No items added yet."}),e.jsx("p",{className:"text-sm mt-1",children:'Tap "Add" to get started.'})]}):o.map(i=>e.jsx(re,{item:i,onEdit:O,onDelete:j},i.id))})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 sticky bottom-0 bg-gray-50 py-4 -mx-4 px-4 border-t border-gray-200 sm:border-t-0 sm:bg-transparent sm:relative sm:py-0 sm:mx-0",children:[e.jsx(p,{variant:"outline",className:"flex-1 h-12",onClick:()=>window.history.back(),disabled:h,children:"Back to WhatsApp"}),e.jsx(p,{onClick:U,disabled:h||o.length===0,className:"flex-1 bg-brand-charcoal hover:bg-brand-charcoal/90 h-12 font-medium text-brand-white font-body",children:h?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full mr-2"}),"Listing Vendors..."]}):"Select Vendor"})]})]}),e.jsx(J,{isOpen:E,onClose:()=>{_(!1),N(null)},item:g,onSave:T,isLoading:h})]})},me=r.memo(ne);export{me as default};
